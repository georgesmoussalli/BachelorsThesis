Journal de bord : 
travail de recherche qui sinscrit dans la recherche de doctorat pour reperer les femmes a cette Faculté
et voir qui sont leurs soutien dans la Faculté
est ce que elles se professionalisent? Pas toutes elles rencontrent souvent un mari et laisse tomber 
leur savoir pour etre femme au foyer. 
Parler du labo de mikhael Intro et Conclusion 
Citer la compensation des russes par les francaises dans les universites Terres Promises ( ou interdites) Fauvel 
Article de Nathalie PijArt Nicaud.


Téléchargement de pdf2image pour pretraiter les images. Transforme les pdfs en .png et les organise par pdf 
Téléchargement de tesseract pour OCR une fois que les images sont traitées. Prends les .png et extrait le texte brut par pdf
On commence par transformer les pdfs en png pour meilleur qualité même si implique stockage massif et plus de temps de traitement donc long et plus complexe que prévu 
ocr.ipynb : 
Transforme pdf en listes d’images puis prétraite les images : moins gris,  augmente le contraste, seuil pour isoler le texte (image binaire)
Ocr sur les images et les stockes un fichier .txt par pdfs
Stocke les données extraites dans data dans le dossier texte extrait spécifique a chaque pdf
Retrait de tous les accents du texte brut 

On commence a la page start et on finit a la page fin pour pas s'encombrer de pages inutiles pour l'instant et pour permettre l'extraction du texte de créer moins d'erreur pour le df

On cherche outil tesseract si ca marche bénéficie sinon séparation es images en trouver un moyen d éliminer tome et les commentaires en dessous 
le mieux est de séparer les images en deux car ca marche mal sinon donc on separe 

df mettre nom, prenom , sujet de these probleme le sujet est parfois separer en deux pages a la fin dune page et le debut d une autre 

probleme les parentheses disparaisse souvent dans l'ocrisation et fin d une page debut d une autre marche pas donc on extrait le texte brut de chaque annee au lieu de faire image par image et
on dataframe toute l annee d un coup. regle le probleme de theses separees en deux pages. 

corriger process_folder puis faire porcess_all_folders
regler le probleme de separation du titre de these entre 2 pages
corriger colonne sujet quand y a un nom (majuscules) créer une nouvelle ligne en dessous avec le nom en question et le sujet de these et le prenom 
Nouveau probleme separation aves les tomes qui pose probleme donc revoir process image et separer la feuille en deux apres l avoir separer autour des tomes pour permettre de rien rater
Etre sur que le df est clean et rate le moins d'info possible.
Rajouter annee 

Dictionnaires Francais et medical pour connaitre la précision de l’ocrisation (dictionnaire de base et médical) : 
Liste de mots français (). https://github.com/chrplr/openlexicon/blob/master/ datasets-info/Liste-de-mots-francais-Gutenberg/liste.de.mots.francais. frgut.txt.
Calculer précision tesseract avec les dictionnaires et faire des graphes à inclure dans le rapport.
enlever les accents des dictionnaires.
dictionnaire medical : https://github.com/CodeSante/medical-wordlist/tree/main/fr
seulement 73.4% de precision donc changement de modele tesseract on passe au modele best + changement de moteur on passe a LSTM + legacy au lieu du
moteur par defaut quelque soit le modele ca aide pas on a a peu pres le meme taux de précision.

On rajoute binarisation et denoising de la qualite des images 
Corriger les mots faux de l ocrisation a l aide des dictionnaires: 
tu pourrais envisager une correction automatique OCR après reconnaissance (spellchecker français + médical).
fuzzywuzzy pour match flous avec ton francais.txt

Dictionnaires pour pouvoir reconnaitre hommes femmes (dictionnaire de prénoms + rajouter ceux d'amelie puche) + remplir case sexe du csv + mettre case résolu vrai ou faux si la ligne a un prénom reconnu avec un sexe reconnu 
elle est résolu sinon il faut la résoudre
Reconnaitre hommes et femme et mettre infos dans csv + categorie pas sur ou prenoms double sexe ect sur lesquels il faudra faire des recherches specifiques et rentrer manuellement dans les csv ou 
Prénom mixte sans madame ou mademoiselle camille problématique recherche dans université paris cité
Marie est un piège car masculin a la fin du 19eme siècle
Marie compose peut être homme. donc tous les marie sont dans la categorie pas sur 
Nombre de femmmes vs nombre d'hommes total puis par annee et faire des graphes 
corrections des prenoms avec le meme mode que les sujets
Ameliorer regex 
Analyse des themes des theses des femmes comparés aux hommes 
PDB Analyse thematique avec bert kmeans sentencetransformers
50% des theses ne sont pas classifiables car trop courtes ou pas de correspondance avec termed medical


Commencer ecriture : plan 
Comment la présence croissante des femmes dans la production doctorale à la Faculté de Médecine de 
l’Université de Paris entre 1870 et 1939 s’est-elle traduite (ou non) dans les thématiques de leurs 
travaux ?
et le plan suivant :

I. Construction du corpus et traitement technique des thèses (1870–1939)

    Présentation de la source (thèses soutenues à l’Université de Paris)
    Méthodologie :
        Extraction des métadonnées à partir des PDF
        Traitement par OCR (optical character recognition)
        Constitution du tableau recensant les doctorant·es
    Définition des critères d’identification du sexe (prénom, dictionnaire, etc.)
    Limites et atouts de la méthode (prénoms ambigus, erreurs OCR, etc.)

II. Analyse de la présence féminine et des thématiques des thèses

    Évolution chronologique du nombre de femmes doctorantes (graphiques, tendances)
    Répartition par Thématiques
    Étude des titres/sujets :
        Absence de spécificité genrée dans les choix thématiques
        Comparaison hommes/femmes par discipline
    Hypothèse : intégration dans des normes thématiques déjà en place

III. Conclusion : que nous apprend cette cartographie sur la place des femmes à l’université ?

    Confirmation d’un mouvement quantitatif fort mais sans rupture thématique
    Analyse critique : présence féminine sans visibilité idéologique ?
    Ouverture :
        Concurrence genrée sur les parcours professionnels après la thèse ?( pas aller trop loin)
        Vers la question de la reconnaissance institutionnelle ? (pas aller trop loin) citer amelie puche Dicopohlis

Bibliographie :  import os 
import numpy as np 
import cv2
from pdf2image import convert_from_path
import pytesseract
import unicodedata
import re
import pandas as pd
import natsort
import matplotlib.pyplot as plt
import spellchecker
import rapidfuzz
import unidecode 
import tqdm 
from sklearn.decomposition import NMF
from sentence_transformers import SentenceTransformer
from sklearn.cluster import KMeans
import seaborn as sns 
import os

